# Lab: Exploiting XXE using external entities to retrieve files
* Tận dụng lỗ hổng XXE để lấy dữ liệu từ file /etc/passwd
* Thì lab này có enpoint Stockcheck dữ liệu đầu vào XML
* Bắt tay vào tìm check thui
* ![image](https://user-images.githubusercontent.com/20487674/127026697-41bc4061-9a26-42aa-b994-fde286a0bce8.png)
* Lấy Burp bắt request lại xem như thế nào
* ![image](https://user-images.githubusercontent.com/20487674/127032322-08931f69-d234-4c9f-ae3f-63d7fd56a54e.png)
* Thấy 1 đoạn xml ,trong phần lý thuyết của burp có nhắc đó xml dtd(Document Type Definition) và trong xml DTD có phần External Entity Declaration
* ![image](https://user-images.githubusercontent.com/20487674/127471076-bbfaf7e4-d311-4b4b-a704-50d731c50af9.png)

* ![image](https://user-images.githubusercontent.com/20487674/127032532-bbde6056-8889-460b-83f2-d68b4ef2941e.png)
* Và phần <!ENTITY entity-name SYSTEM "URI/URL">   chỗ "URI/URL" không chỉ điền các URI/URL mà còn có thể điền file:///etc/passwd mọi người có thể kham thảo thêm [List of URI schemes](https://en.wikipedia.org/wiki/List_of_URI_schemes),
có thể tận dụng để tấn công.
* Giải thích một tý cấu trúc xml DTD
* Có 3 thành phần chính: 
# Elements
* Khai báo 
* ![image](https://user-images.githubusercontent.com/20487674/127035757-8da49253-20eb-42b8-9b68-0d816c72a210.png)
* category: 
* * EMPTY : kiểu rỗng
* * #PCDATA : kiểu dữ liệu văn bản
* * ANY : kiểu dữ liệu bất kỳ
* * Mọi người có thể kham thảo thêm [một số category khác](https://www.w3schools.com/xml/xml_dtd_elements.asp)
# Attributes
* Khai báo
* ![image](https://user-images.githubusercontent.com/20487674/127037469-040ca50a-e82e-4ce7-8f6e-bf513eb54d48.png)
* attribute-type
* ![image](https://user-images.githubusercontent.com/20487674/127037574-cb2d90da-e252-4d5e-b79d-a97f370fae77.png)
* attribute-value
* ![image](https://user-images.githubusercontent.com/20487674/127037739-0aabfd13-6fcc-4b74-91e3-a56c1096d473.png)
# Entities
* Khai báo
* ![image](https://user-images.githubusercontent.com/20487674/127037872-b52215db-e2e9-4577-bd11-4ce3c5fd6c7e.png)
* ![image](https://user-images.githubusercontent.com/20487674/127037919-88047c88-c03a-48ca-ad0e-000c2d7f3b7d.png)
* Sau khi tìm hiểu cấu trúc xml dtd , mình bắt đầu chỉnh sửa nội phần xml ở phần post body
* ![image](https://user-images.githubusercontent.com/20487674/127034945-5c4a8d39-ac8b-4a25-8c20-97c61ddefa80.png)
* Cuối cùng đã giải quyết xong bài lab
* Tóm tắt về xml dtd khá hay [link youtube mình kham thảo](https://www.youtube.com/watch?v=OjwV5X1Ugvs)
* ![image](https://user-images.githubusercontent.com/20487674/127424751-7b70b9cf-d94f-439c-9c65-3b446e4094de.png)

* Một số link mà  mình kham thảo:
* [https://www.w3schools.com/xml/xml_dtd_intro.asp](https://www.w3schools.com/xml/xml_dtd_intro.asp)
* [https://viblo.asia/p/tim-hieu-ve-xml-phan-1-gAm5ybxwKdb](https://viblo.asia/p/tim-hieu-ve-xml-phan-1-gAm5ybxwKdb)
* [https://viblo.asia/p/tim-hieu-ve-xml-phan-2-dtd-vyDZONoxKwj](https://viblo.asia/p/tim-hieu-ve-xml-phan-2-dtd-vyDZONoxKwj)
